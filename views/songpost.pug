extends layout

append head
    script(src='/javascripts/index.js')
    script(src='/javascripts/3-dots.js')
block content

    div(class='songpost-post' id=songPost.id)
        p: a(href='/' class='all-posts') <- See all other posts
        if locals.user.id === songPost.userId
            p(class='delete-post'): a(href=`/songposts/${songPost.id}/delete`) Delete Post
            p(class='edit-post'): a(href=`/songposts/${songPost.id}/edit`) Edit Post
        else

        div(class='entire-post')
            div(class="moving-the-name")
                a(class="user-link" href=`/users/${songPost.User.username}`) Posted By: #{songPost.User.username}
            h1= songPost.postTitle
                h2 Song: #{songPost.songTitle} / Artist: #{songPost.artist} / Album: #{songPost.album} / Genre: #{songPost.genre}
                a(href=songPost.songLink class="link-to-song") Link To Song
                h5(class='songpost-body')= songPost.body
    div(class='songpost-note-show')
        h1(id='comments') Notes
        div(class="notes-container")
            form(class='notes-form' id=songPost.id)
                input(type="hidden" name="_csrf" value=csrfToken)
                label(for="postComment") Post Notes
                textarea(class="noteText" name="postComment", cols="40", rows="10" value=body)
                div(class='songpost-note-submit')
                    button(type='submit' class='create-post') Post
                    a(href='/' class='create-cancel') Cancel
        div(class='songpost-note')
            if notes.length > 0
                each note in notes
                    div(class="notes-posted" id=`${note.id}`) #{note.User.username}: #{note.body}
                        if locals.user.id === note.userId
                            div(class="container")
                                div(class=`more ${note.id}`)
                                    img(id="more-btn" class="more-btn" src="/images/3-dots.jpg" height='10px' width='10px')
                                    div(class="more-menu")
                                        div(class="more-menu-caret")
                                            div(class="more-menu-caret-outer")
                                            div(class="more-menu-caret-inner")
                                        ul(class="more-menu-items" tabindex="-1" role="menu" aria-labelledby="more-btn" aria-hidden="true")
                                            li(class="more-menu-item" role="presentation")
                                                //- button(type="button" class="more-menu-btn edit-btn" role="menuitem" id=`/api/songposts/${note.songPostId}/notes/${note.id}/edit`) Edit
                                                a(href=`/api/songposts/${note.songPostId}/notes/${note.id}/edit` class="note-edit") Edit
                                            li(class="more-menu-item" role="presentation")
                                                //- button(type="button" class="more-menu-btn delete-btn" role="menuitem" id=`/api/songposts/${note.songPostId}/notes/${note.id}/delete`) Delete
                                                a(href=`/api/songposts/${note.songPostId}/notes/${note.id}/delete` class="note-delete") Delete



            else
                h2(id='no-comment') There are no notes yet! Start a discussion!
